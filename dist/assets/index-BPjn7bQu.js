import{r as e,a as t}from"./vendor-DTyhwCXl.js";import{r as a,U as r,M as s,P as n,C as l,a as o,S as i,b as c,A as d,c as m,d as x,X as u,T as h,R as f,e as p,f as g,D as b}from"./lucide-CqrWdUMu.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var j,v,y={exports:{}},N={};var w,C=(v||(v=1,y.exports=function(){if(j)return N;j=1;var t=e(),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,r){var o,i={},c=null,d=null;for(o in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,o)&&!l.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===i[o]&&(i[o]=t[o]);return{$$typeof:a,type:e,key:c,ref:d,props:i,_owner:n.current}}return N.Fragment=r,N.jsx=o,N.jsxs=o,N}()),y.exports),S={};var k=function(){if(w)return S;w=1;var e=t();return S.createRoot=e.createRoot,S.hydrateRoot=e.hydrateRoot,S}();const I={},E=function(e,t,a){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=e?.nonce||e?.getAttribute("nonce");s=t.map(e=>{if((e=function(e){return"/"+e}(e))in I)return;I[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,a&&s.setAttribute("nonce",a),document.head.appendChild(s),t?new Promise((t,a)=>{s.addEventListener("load",t),s.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}),r=Promise.all(s.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}var s;function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},A="http://localhost:3001/api";async function M(e,t){const a=await fetch(`${A}${e}`,{headers:{"Content-Type":"application/json",...t?.headers},...t});if(!a.ok){const e=await a.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(e.error||`Erro na requisição: ${a.status}`)}return a.json()}const P={getIndicadores:async()=>M("/indicadores"),getIndicador:async e=>M(`/indicadores/${e}`),salvarIndicador:async e=>M("/indicadores",{method:"POST",body:JSON.stringify(e)}),getLeads:async()=>M("/leads"),getLeadsByIndicador:async e=>M(`/leads/indicador/${e}`),salvarLeads:async(e,t)=>M("/leads",{method:"POST",body:JSON.stringify({id_indicador:e,leads:t})}),getPremios:async()=>M("/premios"),async getPremioByIndicador(e){try{return await M(`/premios/indicador/${e}`)}catch(t){if(t instanceof Error&&t.message.includes("404"))return null;throw t}},salvarPremio:async e=>M("/premios",{method:"POST",body:JSON.stringify(e)}),exportarDados:async()=>await M("/exportar"),downloadCSV(e){window.open(`${A}/download/${e}`,"_blank")},checkHealth:async()=>M("/health")},$=Object.freeze(Object.defineProperty({__proto__:null,api:P},Symbol.toStringTag,{value:"Module"})),_=e=>{const t=e.replace(/\D/g,"").slice(0,11);return 11===t.length?t.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):11===t.length?t.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):t.length>6?t.replace(/(\d{2})(\d{4,5})(\d*)/,"($1) $2-$3"):t.length>2?t.replace(/(\d{2})(\d*)/,"($1) $2"):t},D=e=>{const t=e.trim();return t?t.length<2?"Nome deve ter pelo menos 2 caracteres":t.length>100?"Nome deve ter no máximo 100 caracteres":/^[a-zA-ZÀ-ÿ\s]+$/.test(t)?null:"Nome deve conter apenas letras":"Nome é obrigatório"};function O({onCadastroCompleto:e}){const[t,l]=a.useState({nome:"",email:"",telefone:""}),[o,i]=a.useState({}),[c,d]=a.useState(!1),m=(e,t)=>{let a=t;"telefone"===e&&(a=_(t)),l(t=>({...t,[e]:a})),o[e]&&i(t=>({...t,[e]:void 0}))};return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#002f25] to-[#003d32] flex items-center justify-center p-4 relative overflow-hidden",children:[C.jsx("img",{src:"/teste.png",alt:"Marca d'água",className:"fixed 0 w-80 h-80 object-contain pointer-events-none z-50",style:{top:"-104px",right:"30px"}}),C.jsxs("div",{className:"max-w-3xl w-full",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("div",{className:"inline-flex items-center justify-center mb-4",children:C.jsx("img",{src:"/lampada.png",alt:"Lâmpada",className:"w-40 h-30 object-contain drop-shadow-lg"})}),C.jsxs("h1",{className:"text-7xl font-extrabold text-white mb-3",children:["FAÇA INDICAÇÕES E ",C.jsx("br",{}),"  ",C.jsx("span",{className:"text-6xl text-laranja",children:"GANHE PRÊMIOS!"})]}),C.jsx("p",{className:"text-lg text-white font-bold",children:"COMECE SE CADASTRANDO"})]}),C.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:C.jsxs("form",{onSubmit:async a=>{a.preventDefault();const r={},s=D(t.nome),n=(l=t.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)?null:"E-mail inválido");var l;const o=t.telefone.replace(/\D/g,"").length<10?"Telefone inválido":null;if(s&&(r.nome=s),n&&(r.email=n),o&&(r.telefone=o),Object.keys(r).length>0)i(r);else{d(!0);try{const a=await P.salvarIndicador({...t,telefone:t.telefone.replace(/\D/g,"")});e(a.id)}catch(c){const e=c instanceof Error?c.message:"Erro ao cadastrar indicador. Verifique se o e-mail já não está cadastrado.";alert(e)}finally{d(!1)}}},className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-semibold text-grey-700 mb-2",children:"Nome Completo *"}),C.jsxs("div",{className:"relative",children:[C.jsx(r,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-grey-400"}),C.jsx("input",{type:"text",value:t.nome,onChange:e=>m("nome",e.target.value),className:"w-full pl-11 pr-4 py-3 border-2 rounded-lg focus:ring-2 focus:ring-verde-claro focus:border-verde-claro transition-all "+(o.nome?"border-red-500":"border-gray-200"),placeholder:"Digite seu nome completo"})]}),o.nome&&C.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.nome})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-semibold text-white-700 mb-2",children:"E-mail *"}),C.jsxs("div",{className:"relative",children:[C.jsx(s,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white-400"}),C.jsx("input",{type:"email",value:t.email,onChange:e=>m("email",e.target.value),className:"w-full pl-11 pr-4 py-3 border-2 rounded-lg focus:ring-2 focus:ring-verde-claro focus:border-verde-claro transition-all "+(o.email?"border-red-500":"border-gray-200"),placeholder:"seu@email.com"})]}),o.email&&C.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.email})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-semibold text-white-700 mb-2",children:"Telefone/WhatsApp *"}),C.jsxs("div",{className:"relative",children:[C.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white-400"}),C.jsx("input",{type:"tel",value:t.telefone,onChange:e=>m("telefone",e.target.value),className:"w-full pl-11 pr-4 py-3 border-2 rounded-lg focus:ring-2 focus:ring-verde-claro focus:border-verde-claro transition-all "+(o.telefone?"border-red-500":"border-gray-200"),placeholder:"(00) 00000-0000"})]}),o.telefone&&C.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.telefone})]}),C.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-laranja to-laranja text-white font-bold py-4 px-6 rounded-lg shadow-lg hover:shadow-xl hover:from-laranja/90 hover:to-laranja/90 transform hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:c?"Cadastrando...":"Cadastrar-se"})]})})]})]})}function F({idIndicador:e,onConcluido:t}){const[r,s]=a.useState([{nome:"",telefone:""},{nome:"",telefone:""},{nome:"",telefone:""}]),[x,u]=a.useState({}),[h,f]=a.useState("idle"),[p,g]=a.useState(!1),[b,j]=a.useState(""),[v,y]=a.useState(0),[N,w]=a.useState([!1,!1,!1]),S=a.useCallback((e,t)=>"nome"===t?D(e)||void 0:"telefone"===t&&(e=>{const t=e.replace(/\D/g,"");return t?t.length<10?"Telefone deve ter pelo menos 10 dígitos":t.length>11?"Telefone deve ter no máximo 11 dígitos":null:"Telefone é obrigatório"})(e)||void 0,[]),k=a.useCallback(e=>e.nome.trim().length>0&&e.telefone.trim().length>0&&!S(e.nome,"nome")&&!S(e.telefone,"telefone"),[S]),I=a.useCallback(()=>{v<2&&y(e=>e+1)},[v]),E=a.useCallback(()=>{v>0&&y(e=>e-1)},[v]),A=a.useCallback((e,t,a)=>{let r=a;if("telefone"===t&&(r=_(a)),p){const a=S(r,t);u(r=>{const s={...r};return a?s[e]={...s[e],[t]:a}:(delete s[e]?.[t],s[e]&&0===Object.keys(s[e]).length&&delete s[e]),s})}s(a=>{const s=[...a];s[e]={...s[e],[t]:r};const n=k(s[e]);return w(t=>{const a=[...t];return a[e]=n,a}),s})},[p,S,k]),M=a.useCallback(()=>{const e={};let t=!0;return r.forEach((a,r)=>{const s={},n=S(a.nome,"nome"),l=S(a.telefone,"telefone");n&&(s.nome=n,t=!1),l&&(s.telefone=l,t=!1),Object.keys(s).length>0&&(e[r]=s)}),u(e),t},[r,S]),$=a.useCallback(async()=>{if(g(!0),f("validating"),M()){f("submitting");try{const a=r.map(e=>({nome:e.nome.trim(),telefone:e.telefone.replace(/\D/g,""),email:""}));await P.salvarLeads(e,a),f("success"),j("Contatos salvos com sucesso! Você está participando da promoção."),setTimeout(()=>{t()},2e3)}catch(a){f("error"),j("Erro ao salvar os contatos. Por favor, tente novamente.")}}else f("error")},[r,M,e,t]),O="submitting"===h||"validating"===h,F="success"===h,T=Object.keys(x).length>0;return a.useEffect(()=>{const e=e=>{e.target instanceof HTMLInputElement||("ArrowRight"===e.key&&v<2&&N[v]?(e.preventDefault(),I()):"ArrowLeft"===e.key&&v>0&&(e.preventDefault(),E()))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[v,N,I,E]),C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#002f25] to-[#003d32] flex items-center justify-center p-4 md:p-8 relative overflow-hidden",children:[C.jsx("img",{src:"/teste.png",alt:"Marca d'água",className:"fixed 0 w-80 h-80 object-contain pointer-events-none z-50",style:{top:"-104px",right:"30px"}}),C.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[C.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-emerald-400/10 rounded-full blur-xl animate-pulse"}),C.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-yellow-400/10 rounded-full blur-xl animate-pulse delay-1000"}),C.jsx("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-emerald-300/10 rounded-full blur-lg animate-bounce"})]}),C.jsx("div",{className:"w-full max-w-[120rem] mx-auto z-10",children:C.jsxs("div",{className:"grid lg:grid-cols-[1.2fr_0.8fr] gap-6 lg:gap-8 items-center",children:[C.jsxs("div",{className:"text-white text-center flex flex-col items-center justify-center order-2 lg:order-1",children:[C.jsx("div",{className:"mt-6 flex justify-center relative",children:C.jsx("img",{src:"/lampada.png",alt:"Lâmpada Mágica",className:"w-64 md:w-80 lg:w-[35rem] h-auto object-contain drop-shadow-[0_10px_30px_rgba(250,204,21,0.4)] hover:scale-105 transition-transform duration-300 mb-6"})}),C.jsxs("h1",{className:"font-extrabold uppercase text-center leading-none mb-6",children:[C.jsxs("span",{className:"block text-[clamp(2rem,6vw,5rem)] text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.5)]",children:["LIBERTE A"," ",C.jsxs("span",{className:"text-laranja relative",children:["GÊNI",C.jsx("span",{className:"text-white",children:"."}),"IA"]})]}),C.jsx("span",{className:"block text-[clamp(1.5rem,5vw,4rem)] mt-2 text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.5)]",children:"DA LÂMPADA MÁGICA"})]}),C.jsxs("p",{className:"text-3xl md:text-5xl lg:text-2xl font-extrabold uppercase leading-tight drop-shadow-lg mb-4 text-center",children:["INDIQUE ",C.jsx("span",{className:"text-laranja",children:"3 PESSOAS"})," QUE PODEM SE ",C.jsx("br",{}),"BENEFICIAR COM O WORKMONITOR!"]})]}),C.jsxs("div",{className:"order-1 lg:order-2 relative lg:pl-0 lg:ml-[-15rem] flex justify-center items-center",children:[v>0&&C.jsx("button",{type:"button",onClick:E,className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-12 z-30 bg-gray-600 hover:bg-gray-500 text-white p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110",title:"Clique para voltar ao contato anterior",children:C.jsx(l,{className:"w-6 h-6"})}),v<2&&N[v]&&C.jsx("button",{type:"button",onClick:I,className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-12 z-30 bg-emerald-500 hover:bg-emerald-400 text-black p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110 animate-pulse",title:"Clique para ir ao próximo contato",children:C.jsx(o,{className:"w-6 h-6"})}),2===v&&N[v]&&C.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-12 z-30 bg-emerald-500 text-black p-3 rounded-full shadow-lg animate-pulse",children:C.jsx(i,{className:"w-6 h-6"})}),C.jsxs("div",{className:"bg-black/90 backdrop-blur-sm border border-emerald-400/30 rounded-xl shadow-2xl p-6 md:p-8 w-full relative overflow-hidden max-w-lg mx-auto",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 to-transparent pointer-events-none"}),C.jsxs("div",{className:"relative z-10 mb-4 text-center",children:[C.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white mb-2",children:"Cadastre seus Contatos"}),C.jsx("p",{className:"text-gray-400 text-sm",children:"Preencha um por vez"})]}),F&&C.jsx("div",{className:"mb-3 p-3 bg-emerald-500/20 border border-emerald-400/50 rounded-lg",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(c,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-emerald-400 font-semibold text-sm",children:"Sucesso!"}),C.jsx("p",{className:"text-emerald-300 text-sm",children:b})]})]})}),"error"===h&&T&&C.jsx("div",{className:"mb-3 p-3 bg-red-500/20 border border-red-400/50 rounded-lg",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(d,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-red-400 font-semibold text-sm",children:"Atenção!"}),C.jsx("p",{className:"text-red-300 text-sm",children:"Corrija os campos destacados."})]})]})}),C.jsxs("form",{onSubmit:e=>{e.preventDefault(),$()},className:"relative z-10",children:[C.jsx("div",{className:"flex justify-center mb-5",children:C.jsx("div",{className:"flex gap-3",children:[0,1,2].map(e=>C.jsx("div",{className:"w-12 h-2.5 rounded-full transition-all duration-300 "+(e===v?"bg-emerald-400":N[e]?"bg-emerald-600":"bg-gray-600")},e))})}),C.jsx("div",{className:"relative overflow-hidden",children:C.jsx("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${100*v}%)`},children:r.map((e,t)=>C.jsx("div",{className:"w-full flex-shrink-0",children:C.jsxs("div",{className:"p-4 md:p-5 bg-gray-900/30 rounded-lg border border-gray-700/30 hover:border-emerald-400/30 transition-colors",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsxs("div",{className:"flex items-center gap-2.5",children:[C.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(N[t]?"bg-emerald-400/30":"bg-emerald-400/20"),children:N[t]?C.jsx(c,{className:"w-5 h-5 text-emerald-400"}):C.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:t+1})}),C.jsx("h3",{className:"font-semibold text-white text-base",children:0===t?"1ª Indicação":1===t?"2ª Indicação":"3ª Indicação"})]}),C.jsxs("span",{className:"text-sm text-gray-400",children:[t+1,"/3"]})]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:`nome-${t}`,className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Nome Completo *"}),C.jsxs("div",{className:"relative",children:[C.jsx(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),C.jsx("input",{type:"text",id:`nome-${t}`,value:e.nome,onChange:e=>A(t,"nome",e.target.value),className:"w-full bg-gray-800/50 text-white border rounded-lg pl-11 pr-11 py-3 text-base focus:ring-2 focus:ring-emerald-400/50 focus:border-emerald-400 transition-all placeholder:text-gray-500 "+(x[t]?.nome?"border-red-500 bg-red-500/10":"border-gray-600 hover:border-gray-500"),placeholder:"Digite o nome completo",disabled:O}),e.nome&&!x[t]?.nome&&C.jsx(c,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-emerald-400"})]}),x[t]?.nome&&C.jsxs("p",{className:"mt-1.5 text-sm text-red-400 flex items-center gap-1",children:[C.jsx(d,{className:"w-4 h-4"}),x[t]?.nome]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:`telefone-${t}`,className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Telefone *"}),C.jsxs("div",{className:"relative",children:[C.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),C.jsx("input",{type:"tel",id:`telefone-${t}`,value:e.telefone,onChange:e=>A(t,"telefone",e.target.value),className:"w-full bg-gray-800/50 text-white border rounded-lg pl-11 pr-11 py-3 text-base focus:ring-2 focus:ring-emerald-400/50 focus:border-emerald-400 transition-all placeholder:text-gray-500 "+(x[t]?.telefone?"border-red-500 bg-red-500/10":"border-gray-600 hover:border-gray-500"),placeholder:"(11) 99999-9999",disabled:O}),e.telefone&&!x[t]?.telefone&&C.jsx(c,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-emerald-400"})]}),x[t]?.telefone&&C.jsxs("p",{className:"mt-1.5 text-sm text-red-400 flex items-center gap-1",children:[C.jsx(d,{className:"w-4 h-4"}),x[t]?.telefone]})]})]})]})},t))})}),2===v&&C.jsx("div",{className:"mt-5",children:C.jsx("button",{type:"submit",disabled:O||!N.every(Boolean),className:"w-full py-4 px-6 rounded-lg transition-all flex items-center justify-center gap-2.5 text-base font-semibold "+(O?"bg-gray-600 text-gray-300 cursor-wait":F?"bg-emerald-600 text-white":N.every(Boolean)?"bg-emerald-500 text-black hover:bg-emerald-400 hover:-translate-y-0.5":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:O?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),"validating"===h?"Validando...":"Enviando..."]}):F?C.jsxs(C.Fragment,{children:[C.jsx(c,{className:"w-5 h-5"}),"Enviado com Sucesso!"]}):C.jsxs(C.Fragment,{children:[C.jsx(i,{className:"w-5 h-5"}),"Participar do Sorteio"]})})}),!N[v]&&v<2&&C.jsx("p",{className:"mt-3 text-sm text-gray-400 text-center",children:"Complete os campos para continuar"}),N[v]&&v<2&&C.jsxs("p",{className:"mt-3 text-sm text-emerald-400 text-center flex items-center justify-center gap-1.5",children:[C.jsx("span",{children:"Use as setas"}),C.jsx(o,{className:"w-4 h-4"}),C.jsx("span",{children:"ou clique na seta para continuar"})]}),2===v&&N.filter(Boolean).length>0&&C.jsx("div",{className:"mt-4 p-3 bg-emerald-500/10 border border-emerald-400/30 rounded-lg text-center",children:C.jsxs("p",{className:"text-sm text-emerald-400",children:[N.filter(Boolean).length,"/3 contatos preenchidos"]})})]})]})]})]})})]})}const T=[{descricao:"teste1",cor:"#FFD700"},{descricao:"teste2",cor:"#FF6B6B"},{descricao:"teste3",cor:"#4ECDC4"},{descricao:"teste4",cor:"#95E1D3"},{descricao:"teste5",cor:"#F38181"},{descricao:"teste6",cor:"#AA96DA"},{descricao:"teste7",cor:"#FCBAD3"},{descricao:"teste8",cor:"#A8E6CF"}],R=["🔥 Quanto mais rápido, melhor o prêmio!","⚡ Continue esfregando para a sorte grande!","💪 Não pare! Seu prêmio está chegando!","🎯 Velocidade é tudo! Acelere!","✨ Está quase lá! Continue!","🚀 Mais rápido = Prêmios melhores!","💎 A sorte favorece os rápidos!","⭐ Você está arrasando! Continue!"],L=["⚠️ Perdendo velocidade! Volte e acelere!","🔄 Suas chances estão diminuindo!","⏰ Não deixe a sorte escapar!","🎯 Retome o controle da roleta!","💨 A velocidade está caindo!"],z=a.memo(function({idIndicador:e,nomeIndicador:t,onPremioRevelado:r}){const[s,n]=a.useState(null),[l,o]=a.useState(0),[i,c]=a.useState(0),[d,m]=a.useState(!1),[u,h]=a.useState(!1),[f,p]=a.useState(null),[g,b]=a.useState(!1),[j,v]=a.useState(!1),[y,N]=a.useState(""),[w,S]=a.useState(!1),[k,I]=a.useState(!1),E=a.useRef({x:0,y:0}),A=a.useRef(!1),M=a.useRef(null),$=a.useRef(),_=a.useRef(null),D=a.useRef(null),O=a.useRef(null),F=a.useMemo(()=>["/lampada.png","/logo.png","/teste.png"],[]),{isLoading:z}=function(e){const[t,r]=a.useState(!0),[s,n]=a.useState(new Set);return a.useEffect(()=>{const t=e.map(e=>new Promise((t,a)=>{const r=new Image;r.onload=()=>{if(!document.querySelector(`link[href="${e}"]`)){const t=document.createElement("link");t.rel="preload",t.as="image",t.href=e,document.head.appendChild(t)}t(e)},r.onerror=a,r.src=e}));Promise.all(t).then(e=>{n(new Set(e)),r(!1)}).catch(e=>{r(!1)})},[e]),{isLoading:t,loadedImages:s}}(F),q=a.useMemo(()=>360/T.length,[]),B=a.useMemo(()=>T,[]),V=a.useCallback(async()=>{if(A.current)return;A.current=!0;const t=Math.floor(Math.random()*B.length),a=B[t];try{await P.salvarPremio({id_indicador:e,premio_descricao:a.descricao,premio_index:t})}catch(r){}n({premio:a,index:t})},[e,B]),U=a.useCallback(()=>{o(0),c(0),m(!1),h(!1),p(null),b(!1),v(!1),N(""),S(!1),I(!1),n(null),_.current&&(clearTimeout(_.current),_.current=null),D.current&&(clearInterval(D.current),D.current=null),O.current&&(clearInterval(O.current),O.current=null),$.current&&(cancelAnimationFrame($.current),$.current=void 0),M.current&&(M.current.style.transition="",M.current.style.transform="rotate(0deg)"),E.current={x:0,y:0},A.current=!1},[]);a.useEffect(()=>{U(),V()},[V,U]);const W=a.useCallback(()=>{if(!s||j)return;v(!0),c(0),m(!1),$.current&&cancelAnimationFrame($.current);const e=l%360,t=s.index*q+q/2;const a=l-e+1800+(360-t+90)%360;M.current&&(M.current.style.transition="transform 2.5s cubic-bezier(0.25, 0.1, 0.25, 1)",M.current.style.transform=`rotate(${a}deg)`,setTimeout(()=>{o(a),r(s.premio)},2800))},[s,j,l,q,r]);a.useEffect(()=>{if(!d)return;const e=()=>{if(o(e=>e+i),!j&&i>0){let e;e=u?.995:g?.975:.985,c(t=>Math.max(0,t*e)),S(!u&&i<10&&i>.5&&!g),I(g&&i>.5)}i<.5&&!j&&s?W():$.current=requestAnimationFrame(e)};return $.current=requestAnimationFrame(e),()=>{$.current&&cancelAnimationFrame($.current)}},[d,i,u,s,g,j,W]);const G=a.useCallback(e=>{if(!u||!s||g||j)return;const t=e.clientX-E.current.x,a=e.clientY-E.current.y,r=Math.abs(t)+Math.abs(a);c(Math.min(.8*r,25)),m(!0),E.current={x:e.clientX,y:e.clientY}},[u,s,g,j]),H=a.useCallback(e=>{if(g)return;h(!0),E.current={x:e.clientX,y:e.clientY},p(10),N(R[0]);let t=0;O.current=setInterval(()=>{t=(t+1)%R.length,N(R[t])},2e3),D.current=setInterval(()=>{p(e=>null===e||e<=1?(D.current&&clearInterval(D.current),0):e-1)},1e3),_.current=setTimeout(()=>{b(!0),h(!1),D.current&&clearInterval(D.current),O.current&&clearInterval(O.current),p(null),N("")},1e4)},[g,10]),X=a.useCallback(()=>{if(h(!1),_.current&&(clearTimeout(_.current),_.current=null),D.current&&(clearInterval(D.current),D.current=null),O.current&&(clearInterval(O.current),O.current=null),p(null),i>.5&&!g){let e=0;N(L[0]),O.current=setInterval(()=>{e=(e+1)%L.length,N(L[e])},1500)}else N("")},[i,g]);return a.useEffect(()=>()=>{_.current&&(clearTimeout(_.current),_.current=null),D.current&&(clearInterval(D.current),D.current=null),O.current&&(clearInterval(O.current),O.current=null),$.current&&(cancelAnimationFrame($.current),$.current=void 0),M.current&&(M.current.style.transition="",M.current.style.transform="rotate(0deg)")},[]),z?C.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#002f25] to-[#003d32] flex items-center justify-center p-4",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-white mx-auto mb-4"}),C.jsx("p",{className:"text-white text-xl",children:"Carregando roleta..."})]})}):C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#002f25] to-[#003d32] flex items-center justify-center p-4",children:[C.jsx("img",{src:"/teste.png",alt:"Marca d'água",className:"fixed 0 w-80 h-80 object-contain pointer-events-none z-50",style:{top:"-104px",right:"30px"},loading:"eager",decoding:"async"}),C.jsxs("div",{className:"max-w-6xl w-full",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsxs("h1",{className:"text-5xl font-bold text-white mb-3 flex items-center justify-center gap-3",children:[C.jsx(x,{className:"w-12 h-12 text-laranja"}),"Sua Sorte está Lançada!"]}),C.jsxs("p",{className:"text-xl text-purple-200",children:["Parabéns, ",C.jsx("span",{className:"font-bold text-yellow-400",children:t}),"! Descubra seu prêmio!"]})]}),C.jsxs("div",{className:"flex items-center justify-center gap-16 mb-8",children:[C.jsxs("div",{onMouseMove:G,onMouseEnter:H,onMouseLeave:X,className:"text-center cursor-pointer flex-shrink-0 p-8 rounded-3xl transition-all",style:{minWidth:"700px",minHeight:"700px",backgroundColor:u?"rgba(255, 255, 255, 0.1)":k?"rgba(255, 0, 0, 0.1)":w?"rgba(255, 165, 0, 0.1)":"transparent",border:u?"3px dashed #FFD700":k?"3px dashed #FF0000":w?"3px dashed #FFA500":"3px dashed rgba(255, 255, 255, 0.3)"},children:[C.jsx("img",{src:"/lampada.png",alt:"Lâmpada",className:"w-[550px] h-[350px] mx-auto mb-6 transition-transform will-change-transform "+(u?"animate-bounce scale-110":k?"animate-pulse scale-100 opacity-60":w?"animate-pulse scale-105 opacity-80":"scale-100"),loading:"eager",decoding:"async",style:{backfaceVisibility:"hidden",transform:"translateZ(0)",filter:k?"brightness(0.6) sepia(0.5) hue-rotate(-15deg)":w?"brightness(0.8) sepia(0.3) hue-rotate(15deg)":"none"}}),C.jsx("p",{className:"text-3xl font-bold text-white mb-3",children:"Zona de Ativação"}),null!==f&&!g&&C.jsxs(C.Fragment,{children:[C.jsxs("p",{className:"text-laranja font-bold text-6xl mb-4 animate-pulse",children:[f,"s"]}),y&&C.jsx("p",{className:"text-yellow-300 font-bold text-2xl mb-2 animate-pulse",children:y})]}),k?C.jsxs("div",{className:"text-center",children:[C.jsx("p",{className:"text-red-400 font-bold text-2xl mb-2 animate-pulse",children:"⏰ Tempo esgotado! Desacelerando..."}),C.jsxs("p",{className:"text-orange-300 font-medium text-xl",children:["Velocidade: ",Math.round(10*i),"% | Aguarde o resultado!"]})]}):g?C.jsx("p",{className:"text-red-400 font-medium text-2xl",children:"Tempo esgotado! Aguarde o resultado..."}):w?C.jsxs("div",{className:"text-center",children:[C.jsx("p",{className:"text-orange-400 font-bold text-2xl mb-2 animate-pulse",children:y}),C.jsxs("p",{className:"text-yellow-300 font-medium text-xl",children:["Velocidade: ",Math.round(10*i),"% | Volte para acelerar!"]})]}):u?null:C.jsx("p",{className:"text-white font-medium text-2xl",children:"Passe o mouse aqui e esfregue por 10 segundos!"})]}),C.jsxs("div",{className:"relative w-[650px] h-[650px] flex-shrink-0",children:[C.jsx("div",{ref:M,className:"w-full h-full will-change-transform",style:{transform:`rotate(${l}deg)`,backfaceVisibility:"hidden",transformOrigin:"center center"},children:C.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 400 400",style:{willChange:"auto"},children:[T.map((e,t)=>{const a=t*q-90,r=a+q,s=200+190*Math.cos(a*Math.PI/180),n=200+190*Math.sin(a*Math.PI/180),l=200+190*Math.cos(r*Math.PI/180),o=200+190*Math.sin(r*Math.PI/180),i=a+q/2,c=200+130*Math.cos(i*Math.PI/180),d=200+130*Math.sin(i*Math.PI/180);return C.jsxs("g",{children:[C.jsx("path",{d:`M 200 200 L ${s} ${n} A 190 190 0 0 1 ${l} ${o} Z`,fill:e.cor,stroke:"white",strokeWidth:"3"}),C.jsxs("text",{x:c,y:d,fill:"black",fontSize:"16",fontWeight:"bold",textAnchor:"middle",transform:`rotate(${i+90}, ${c}, ${d})`,style:{pointerEvents:"none"},children:[C.jsx("tspan",{x:c,dy:"0",children:e.descricao.split(" ")[0]}),C.jsx("tspan",{x:c,dy:"18",children:e.descricao.split(" ").slice(1).join(" ")})]})]},t)}),C.jsx("circle",{cx:"200",cy:"200",r:"50",fill:"white"}),C.jsx("foreignObject",{x:"150",y:"150",width:"100",height:"100",children:C.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-full h-full object-contain rounded-full",loading:"eager",decoding:"async"})})]})}),C.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-3",children:C.jsx("div",{className:"w-0 h-0 border-l-[30px] border-r-[30px] border-t-[60px] border-l-transparent border-r-transparent border-t-yellow-400 drop-shadow-lg"})})]})]}),d&&i>5&&C.jsx("p",{className:"text-center text-yellow-300 text-lg font-semibold mt-6 animate-pulse",children:"Girando a roleta..."}),d&&i<5&&i>.1&&C.jsx("p",{className:"text-center text-yellow-300 text-lg font-semibold mt-6 animate-pulse",children:"Parando..."})]})]})});function q({nomeIndicador:e,premio:t,onFechar:a,onTentarNovamente:r}){return C.jsxs("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:[C.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full p-8 relative transform animate-scaleIn",children:[C.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-white-400 hover:text-white-600 transition-colors","aria-label":"Fechar",children:C.jsx(u,{className:"w-6 h-6"})}),C.jsxs("div",{className:"text-center",children:[C.jsxs("div",{className:"relative inline-block mb-6",children:[C.jsx("div",{className:"absolute inset-0 bg-laranja rounded-full blur-xl opacity-50 animate-pulse"}),C.jsx("div",{className:"relative w-24 h-24 bg-gradient-to-br from-laranja to-verde-claro rounded-full flex items-center justify-center",children:C.jsx(h,{className:"w-12 h-12 text-white"})})]}),C.jsxs("h2",{className:"text-3xl font-bold text-white-900 mb-2",children:["Parabéns, ",e,"!"]}),C.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[C.jsx(x,{className:"w-5 h-5 text-laranja"}),C.jsx("p",{className:"text-lg text-white-600 font-medium",children:"Você ganhou:"}),C.jsx(x,{className:"w-5 h-5 text-laranja"})]}),C.jsx("div",{className:"mb-6 p-6 rounded-2xl",style:{backgroundColor:`${t.cor}20`},children:C.jsx("p",{className:"text-3xl font-bold",style:{color:t.cor},children:t.descricao})}),C.jsx("div",{className:"bg-gradient-to-r from-cinza-custom to-verde-claro/10 rounded-xl p-4 mb-6",children:C.jsx("p",{className:"text-sm text-white-700 leading-relaxed",children:r?C.jsxs(C.Fragment,{children:["🎯 ",C.jsx("span",{className:"font-semibold",children:"Modo Desenvolvimento:"}),' Clique em "Tentar Novamente" para testar a roleta novamente ou "Entendido" para finalizar.']}):C.jsxs(C.Fragment,{children:["Mostre ao apresentador esse prêmio.",C.jsx("span",{className:"font-semibold",children:" Fique de olho nas suas mensagens!"})]})})}),C.jsxs("div",{className:"flex gap-3",children:[C.jsx("button",{onClick:a,className:"flex-1 bg-gradient-to-r from-verde-escuro to-verde-claro text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl hover:from-verde-escuro/90 hover:to-verde-claro/90 transform hover:-translate-y-0.5 transition-all",children:"Entendido!"}),r&&C.jsxs("button",{onClick:r,className:"flex-1 bg-gradient-to-r from-laranja to-yellow-500 text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl hover:from-laranja/90 hover:to-yellow-500/90 transform hover:-translate-y-0.5 transition-all flex items-center justify-center gap-2",children:[C.jsx(f,{className:"w-5 h-5"}),"Tentar Novamente"]})]})]})]}),C.jsx("style",{children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n\n        @keyframes scaleIn {\n          from {\n            opacity: 0;\n            transform: scale(0.9);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n\n        .animate-fadeIn {\n          animation: fadeIn 0.3s ease-out;\n        }\n\n        .animate-scaleIn {\n          animation: scaleIn 0.4s ease-out;\n        }\n      "})]})}function B({etapaAtual:e,onChangeEtapa:t,onSetIndicadorTeste:r,indicador:s}){const[n,l]=a.useState(!1),[o,i]=a.useState(!1),c=[{id:"cadastro-indicador",nome:"1. Cadastro Indicador",icon:m,cor:"from-blue-500 to-blue-600"},{id:"cadastro-leads",nome:"2. Cadastro Leads",icon:g,cor:"from-purple-500 to-purple-600"},{id:"roleta",nome:"3. Roleta da Sorte",icon:b,cor:"from-green-500 to-green-600"}];return C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"fixed top-4 right-4 z-[100]",children:C.jsx("button",{onClick:()=>l(!n),className:"w-14 h-14 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center justify-center",title:"Navegação de Desenvolvimento",children:n?C.jsx(u,{className:"w-6 h-6"}):C.jsx(p,{className:"w-6 h-6 animate-spin-slow"})})}),n&&C.jsxs("div",{className:"fixed top-20 right-4 z-[99] bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl border border-gray-200 p-4 min-w-[280px]",children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"🛠️ Dev Navigation"}),C.jsx("p",{className:"text-sm text-gray-600",children:"Navegue entre as telas rapidamente"})]}),C.jsxs("div",{className:"mb-4 p-3 bg-gray-100 rounded-lg",children:[C.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Indicador: ",s?C.jsxs("span",{className:"text-green-600",children:["✅ ",s.nome," (",s.id,")"]}):C.jsx("span",{className:"text-red-500",children:"❌ Não logado"})]}),!s&&C.jsx("button",{onClick:async()=>{if(!o)try{i(!0),await r()}finally{i(!1)}},disabled:o,className:"mt-2 text-xs px-3 py-1 rounded-md transition-colors "+(o?"bg-blue-400 text-white cursor-wait":"bg-blue-500 text-white hover:bg-blue-600"),children:o?"Criando indicador...":"Criar indicador de teste"})]}),C.jsx("div",{className:"space-y-2",children:c.map(a=>{const r=a.icon,n=e===a.id,o="cadastro-indicador"!==a.id&&!s;return C.jsxs("button",{onClick:()=>{o||(t(a.id),l(!1))},disabled:o,className:`\n                    w-full flex items-center gap-3 p-3 rounded-lg transition-all duration-200 text-left\n                    ${n?`bg-gradient-to-r ${a.cor} text-white shadow-md`:o?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-50 text-gray-700 hover:bg-gray-100 hover:shadow-sm"}\n                  `,children:[C.jsx(r,{className:"w-5 h-5 "+(n?"text-white":o?"text-gray-400":"text-gray-600")}),C.jsxs("div",{className:"flex-1",children:[C.jsx("div",{className:"font-medium "+(n?"text-white":o?"text-gray-400":"text-gray-800"),children:a.nome}),n&&C.jsx("div",{className:"text-sm text-white/80",children:"Atual"}),o&&C.jsx("div",{className:"text-xs text-gray-400",children:"Requer indicador"})]}),n&&C.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})]},a.id)})}),C.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:C.jsx("p",{className:"text-xs text-gray-500 text-center",children:"🚀 Modo Desenvolvimento Ativo"})})]}),n&&C.jsx("div",{className:"fixed inset-0 z-[98]",onClick:()=>l(!1)}),C.jsx("style",{children:"\n        @keyframes spin-slow {\n          from {\n            transform: rotate(0deg);\n          }\n          to {\n            transform: rotate(360deg);\n          }\n        }\n        \n        .animate-spin-slow {\n          animation: spin-slow 3s linear infinite;\n        }\n      "})]})}function V(){const[e,t]=a.useState("cadastro-indicador"),[r,s]=a.useState(null),[n,l]=a.useState(null),[o,i]=a.useState(!1),[c,d]=a.useState(0);return C.jsxs(C.Fragment,{children:[C.jsx(B,{etapaAtual:e,onChangeEtapa:e=>{i(!1),l(null),t(e)},onSetIndicadorTeste:async()=>{if(r)return;const{api:e}=await E(async()=>{const{api:e}=await Promise.resolve().then(()=>$);return{api:e}},void 0);try{const t=Date.now().toString(36),a=await e.salvarIndicador({nome:"Desenvolvedor Teste",email:`dev+${t}@teste.com`,telefone:"11999999999"});s({id:a.id,nome:a.nome})}catch(t){const e=t instanceof Error?t.message:"Não foi possível criar o indicador de teste.";alert(e)}},indicador:r}),"cadastro-indicador"===e&&C.jsx(O,{onCadastroCompleto:async e=>{const{api:a}=await E(async()=>{const{api:e}=await Promise.resolve().then(()=>$);return{api:e}},void 0);try{const r=await a.getIndicador(e);r&&(s({id:e,nome:r.nome}),t("cadastro-leads"))}catch(r){}}}),"cadastro-leads"===e&&r&&C.jsx(F,{idIndicador:r.id,nomeIndicador:r.nome,onConcluido:()=>{t("roleta")}}),"roleta"===e&&r&&C.jsx(z,{idIndicador:r.id,nomeIndicador:r.nome,onPremioRevelado:e=>{l(e),i(!0)}},c),o&&n&&r&&C.jsx(q,{nomeIndicador:r.nome,premio:n,onFechar:()=>{i(!1),l(null),s(null),t("cadastro-indicador")},onTentarNovamente:()=>{i(!1),l(null),d(e=>e+1),t("roleta")}})]})}k.createRoot(document.getElementById("root")).render(C.jsx(a.StrictMode,{children:C.jsx(V,{})}));
